# ğŸ“˜ User æ¨¡å— API æ–‡æ¡£ï¼ˆæœ€ç»ˆç‰ˆï¼‰

## åŸºç¡€è¯´æ˜

### **æ¥å£ URL å‰ç¼€**

```
/api/users
```

### **ç»Ÿä¸€å“åº”æ ¼å¼**

```json
{
  "code": 200,
  "message": "success",
  "data": {}
}
```

### **é”™è¯¯ç è§„èŒƒ**

| code | å«ä¹‰                |
| ---- | ----------------- |
| 200  | æˆåŠŸ                |
| 400  | å‚æ•°é”™è¯¯ / ä¸šåŠ¡å¼‚å¸¸       |
| 401  | æœªç™»å½• / token æ— æ•ˆæˆ–è¿‡æœŸ |
| 403  | æ— æƒé™               |
| 500  | æœåŠ¡å™¨é”™è¯¯             |

### è§’è‰²è¯´æ˜

| è§’è‰²      | è¯´æ˜         |
| ------- | ---------- |
| student | å­¦ç”Ÿï¼Œç”±æ³¨å†Œæ¥å£åˆ›å»º |
| teacher | è€å¸ˆï¼Œæ‰‹åŠ¨æ’å…¥æ•°æ®åº“ |

---

# 1. **è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯**

## **GET /api/users/me**

### æè¿°

è¿”å›å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼ˆå­¦ç”Ÿæˆ–è€å¸ˆéƒ½å¯è°ƒç”¨ï¼‰ã€‚

### è¯·æ±‚å¤´

```
Authorization: Bearer <token>
```

### å“åº”ï¼ˆæˆåŠŸï¼‰

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "username": "20240123",
    "role": "student"
  }
}
```

> æ³¨ï¼šä¹Ÿå¯ä»¥ç”¨ `/api/auth/me`ï¼Œä¸¤è€…ä»»é€‰å…¶ä¸€å³å¯ã€‚

---

# 2. **ä¿®æ”¹å¯†ç **

## **PUT /api/users/changePassword**

### æè¿°

å­¦ç”Ÿ/è€å¸ˆå‡å¯ä¿®æ”¹è‡ªå·±çš„å¯†ç ã€‚

### è¯·æ±‚å¤´

```
Authorization: Bearer <token>
```

### è¯·æ±‚å‚æ•°ï¼ˆJSONï¼‰

```json
{
  "oldPassword": "123456",
  "newPassword": "654321"
}
```

å­—æ®µè¯´æ˜ï¼š

| å­—æ®µ          | å¿…å¡« | è¯´æ˜          |
| ----------- | -- | ----------- |
| oldPassword | æ˜¯  | æ—§å¯†ç          |
| newPassword | æ˜¯  | æ–°å¯†ç ï¼ˆ>= 6 ä½ï¼‰ |

---

### å“åº”ï¼ˆæˆåŠŸï¼‰

```json
{
  "code": 200,
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ",
  "data": null
}
```

---

### å“åº”ï¼ˆå¤±è´¥ï¼šæ—§å¯†ç é”™è¯¯ï¼‰

```json
{
  "code": 400,
  "message": "æ—§å¯†ç é”™è¯¯",
  "data": null
}
```

---

# 3. **è·å–æ‰€æœ‰å­¦ç”Ÿåˆ—è¡¨ï¼ˆä»…è€å¸ˆå¯ç”¨ï¼‰**

## **GET /api/users/students**

### æè¿°

è€å¸ˆæŸ¥çœ‹ç³»ç»Ÿå†…æ‰€æœ‰å­¦ç”Ÿã€‚

### æƒé™æ§åˆ¶

```
@RequiresRole("teacher")
```

### è¯·æ±‚å¤´

```
Authorization: Bearer <token>
```

---

### å“åº”ï¼ˆæˆåŠŸï¼‰

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 2,
      "username": "20240123",
      "role": "student"
    },
    {
      "id": 3,
      "username": "20240124",
      "role": "student"
    }
  ]
}
```

# ğŸ¯ User æ¨¡å— API æ–‡æ¡£æ€»ç»“

ä½ æœ€ç»ˆçš„ User æ¨¡å— API åŒ…å«ï¼š

| æ¥å£                            | æè¿°        | æƒé™              |
| ----------------------------- | --------- | --------------- |
| GET /api/users/me             | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯  | ç™»å½•              |
| PUT /api/users/changePassword | ä¿®æ”¹å¯†ç       | ç™»å½•              |
| GET /api/users/students       | è·å–å­¦ç”Ÿåˆ—è¡¨    | teacher         |

---